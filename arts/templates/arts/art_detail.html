{% extends 'arts/base.html' %}

{% block content %}

<div class="row">
    <div class="col-md-1 col-sm-0"></div>
   
    <div class="col-md-10 col-sm-12">
        <div class="art-detail">
           <br> 
           <img src="{{MEDIA_URL}}{{object.image}}" style="width:100%;padding-bottom:10px;">
            
           {% include 'arts/like.html' %}
                
        </div>
        <div class="delete-botton">
            {% if request.user == object.author %}
            <a href="{% url 'art-delete' object.id %}" class="grey">Delete</a>
            {% endif %}
        </div>
    </div>

    <div class="col-md-1 col-sm-0"></div>

</div>

<br>



<!-- いいね機能 -->
<script type="text/javascript">
    $(document).ready(function(event){
        $(document).on('click', '#like', function(event){
            event.preventDefault();
            $.ajax({
                type: 'POST',
                url: "{% url 'like' %}",
                data: {
                    'art_id': $(this).attr('name'),
                    'csrfmiddlewaretoken': '{{ csrf_token }}'},
                dataType: 'json',
                success: function(response){
                    selector = document.getElementsByName(response.art_id);
                    if(response.liked){
                        $(selector).html("<i class='fas fa-lg fa-heart'></i>");
                    }
                    else {
                        $(selector).html("<i class='far fa-lg fa-heart'></i>");
                    }
                    selector2 = document.getElementsByName(response.art_id + "-count");
                    $(selector2).text(response.count);
                }
            });
        });
    });
  </script>
  



 {% endblock %}
